# 🌟 ASD 支援アプリ（仮称）

ASD（自閉スペクトラム症）や発達障害を持つ子どもが、日常生活の中で適切な行動を遊びながら学ぶための教育支援アプリです。

## 📖 概要

本アプリは、Streamlit を用いて以下の 2 つのメイン機能を提供します：

- **子ども向けイベントモード**: ストーリーブック形式で選択肢を通じた体験的な行動学習
- **保護者向けガイドモード**: シチュエーション別の対応方法と AI による行動理解・支援ヒント提供

## ✨ 主な機能

### 🎮 子ども向けイベントモード

1. **イベント選択**: トイレ、床屋、病院、公園、身支度などの日常場面から学びたいシーンを選択
2. **ストーリー進行**: 各イベントで順番にシーンが展開
3. **行動選択**: 各シーンで複数の選択肢から行動を選択
4. **AI フィードバック**: 選択した行動に対して AI がポジティブなフィードバックを提供
5. **スタンプ付与**: 適切な行動を選択するとスタンプを獲得
6. **ふりかえり**: イベント完了後、行動結果とスタンプを確認

### 👨‍👩‍👧 保護者向けガイドモード

1. **シチュエーション選択**: 実際の場面（トイレ、床屋、病院など）から学びたい状況を選択
2. **子どもの行動パターン**: 各シチュエーションで子どもがとりうる行動を表示
3. **対応方法の選択**: 複数の保護者の対応方法から選択
4. **AI 動的フィードバック**: 選択した対応方法に対して、AI がリアルタイムで評価とアドバイスを生成
   - **簡易フィードバック**: 2-3 文の簡潔なアドバイス（自動表示）
   - **詳細フィードバック**: 根拠を含む詳細な解説（「より詳細な解説を聞く」ボタンで表示）
     - 対応の評価
     - ASD の特性との関連
     - 具体的な理由と背景
     - 実践的なアドバイス
5. **追加質問機能**: その場面について AI にさらに質問できる機能
6. **AI 人格選択**: サイドバーで 3 種類の AI 人格から選択可能
   - 🩺 ロジカルドクター: 科学的根拠を重視した説明
   - 🍀 やさしい先生: 温かく分かりやすい説明
   - 🌞 応援コーチ: 明るく元気な励まし
7. **将来的な RAG 対応**: 専門知識ベースと連携した、より根拠のある回答生成（実装準備済み）

### 💬 保護者向け AI 質問モード（サイドバー）

1. **質問候補表示**: よくある質問をランダムに表示
2. **AI 回答**: 選択した質問に対して AI が回答を生成
3. **自由質問**: テキスト入力による自由な質問も可能

## 🚀 セットアップ

### 必要要件

- Python 3.8 以上
- OpenAI API キー

### インストール手順

1. **リポジトリのクローン**

```bash
git clone <repository-url>
cd ASD_support_practice
```

2. **仮想環境の作成（推奨）**

```bash
python -m venv venv
source venv/bin/activate  # Windows: venv\Scripts\activate
```

3. **依存パッケージのインストール**

```bash
pip install -r requirements.txt
```

4. **環境変数の設定**

`.env.example`をコピーして`.env`ファイルを作成し、必要な情報を入力：

```bash
cp .env.example .env
```

`.env`ファイルを編集：

```env
OPENAI_API_KEY=your_actual_api_key_here
OPENAI_MODEL=gpt-4o-mini
APP_TITLE=ASD支援アプリ
APP_VERSION=0.5
DEBUG_MODE=False
DATA_DIR=./data
USER_PROGRESS_DIR=./data/user_progress
```

5. **アプリの起動**

```bash
streamlit run app/main.py
```

ブラウザが自動的に開き、アプリが起動します（通常は http://localhost:8501）

## 📁 プロジェクト構造

```
ASD_support_practice/
├── app/                      # アプリケーション本体
│   ├── main.py              # エントリーポイント
│   ├── config/              # 設定・プロンプト・定数
│   ├── models/              # データモデル
│   ├── services/            # ビジネスロジック
│   ├── utils/               # ユーティリティ
│   ├── components/          # UIコンポーネント
│   └── pages/               # ページモジュール
├── data/                    # データファイル
│   ├── events/              # イベント定義
│   └── user_progress/       # ユーザー進捗（自動生成）
├── assets/                  # アセット（画像・音声）
├── tests/                   # テストコード
├── docs/                    # ドキュメント
└── requirements.txt         # 依存パッケージ
```

## 🎯 使い方

### 初回起動時

1. アプリを起動すると、ニックネーム入力画面が表示されます
2. ニックネームを入力して「はじめる！」をクリック
3. モード選択画面に移動します

### モード選択

アプリ起動後、以下の 2 つのモードから選択できます：

1. **🎮 子ども向けモード**: 子どもが日常場面での行動を学習
2. **👨‍👩‍👧 保護者向けガイド**: 保護者が子どもへの対応方法を学習

### 子ども向けイベントモードの使い方

1. **イベント選択**: 学びたい場面（トイレ、床屋など）を選択
2. **シーン進行**: 各シーンで提示される選択肢から行動を選ぶ
3. **AI フィードバック**: 選択後、AI からフィードバックが表示される
4. **次へ**: 「次へ」ボタンで次のシーンに進む
5. **ふりかえり**: 全シーン完了後、結果とスタンプを確認

### 保護者向けガイドモードの使い方

1. **シチュエーション選択**: 学びたい場面を選択（イベント別に分類されています）
2. **状況確認**: 子どもがとった行動を確認
3. **対応方法選択**: 複数の対応方法から 1 つ選択
4. **評価とアドバイス確認**: 選択した対応方法に対する評価と AI アドバイスを確認
5. **追加質問**: その場面についてさらに詳しく AI に質問可能

### 保護者向け AI 相談（サイドバー）

どのモードでも、サイドバーから自由に AI に質問できます：

1. **AI 人格選択**: 相談したい AI のタイプを選択
2. **質問選択**: よくある質問から選ぶ、または自由に質問を入力
3. **AI に聞く**: ボタンをクリックして AI の回答を受け取る

## 🧪 テスト

```bash
pytest tests/
```

## 📝 開発スケジュール

本プロジェクトは 4 週間で MVP（最小実行可能製品）を構築する計画です：

| 週     | タスク                       |
| ------ | ---------------------------- |
| Week 1 | 基本 UI + イベントデータ作成 |
| Week 2 | AI 判定 + フィードバック連携 |
| Week 3 | 保護者 AI 質問機能追加       |
| Week 4 | モード切替 + 調整・デプロイ  |

## 🔧 カスタマイズ

### 新しいイベントの追加

1. `data/events/`に新しい JSON ファイルを作成
2. `app/config/constants.py`の`EVENT_NAMES`と`EVENT_FILE_MAPPING`に追加

### AI プロンプトの調整

- `app/config/prompts.py`を編集して AI の振る舞いをカスタマイズ

### UI/UX の変更

- `app/components/`と`app/pages/`のファイルを編集

## 🤝 コントリビューション

本プロジェクトへの貢献を歓迎します！

1. Fork the repository
2. Create your feature branch (`git checkout -b feature/AmazingFeature`)
3. Commit your changes (`git commit -m 'Add some AmazingFeature'`)
4. Push to the branch (`git push origin feature/AmazingFeature`)
5. Open a Pull Request

## 📄 ライセンス

このプロジェクトのライセンスについては、LICENSE ファイルを参照してください。

## 🙏 謝辞

- ASD 支援の理論的裏付け: ABA（応用行動分析）、TEACCH、ソーシャルスキルトレーニング
- AI モデル: OpenAI GPT-4o-mini

## 📞 お問い合わせ

質問や提案がありましたら、Issues セクションでお知らせください。

---

**🌟 子どもたちの成長を支援し、保護者の理解を深めるために 🌟**
