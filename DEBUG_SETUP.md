# デバッグモード - クイックセットアップ

## 🚀 すぐに使い始める

### 1. デバッグモードを有効化

`.env`ファイルを編集：

```bash
# デバッグモードを有効にする
DEBUG_MODE=on

# ログは常に記録（推奨）
DEBUG_LOG_ALWAYS=True
```

### 2. アプリケーションを起動

```bash
streamlit run app/main.py
```

### 3. デバッグ情報を確認

サイドバーに「🔧 デバッグ情報」セクションが表示されます。

## 📊 何が見られるか

### パフォーマンス

- ⏱️ **処理時間**: API 呼び出しと全体処理の時間
- 💰 **推定コスト**: トークン使用量から計算した API 料金
- 📊 **トークン数**: 入力・出力トークンの詳細

### データ情報

- 📚 **リファレンスデータ**: どのデータが使われたか
- 💾 **キャッシュ効率**: ヒット率と操作履歴

### 評価スコア

- ⭐ **AI の評価**: 回答に対するスコア（5 段階評価）
- 🎯 **品質指標**: コンテンツの質的評価

### エラー

- ⚠️ **エラー情報**: 発生したエラーの詳細
- 📝 **トレースバック**: デバッグ用の詳細情報

## 📂 ログファイルの場所

```
logs/
├── app_20251108.log           # 通常ログ
├── error_20251108.log         # エラーのみ
├── performance_20251108.log   # パフォーマンス（DEBUG_MODE時）
└── debug/
    └── debug_20251108.jsonl   # 詳細なデバッグ情報（JSON形式）
```

## 🔧 本番環境での使用

```bash
# UI上には表示しない（ユーザーに影響なし）
DEBUG_MODE=off

# ログファイルには記録する
DEBUG_LOG_ALWAYS=True
```

この設定で：

- ✅ ユーザーにはデバッグ情報が表示されない
- ✅ ログファイルには詳細が記録される
- ✅ 問題が発生した時に追跡可能

## 📖 詳細ガイド

完全な使用方法は以下を参照：

- [デバッグモード利用ガイド](docs/DEBUG_MODE_GUIDE.md)

## 💡 よくある使い方

### 開発時

```bash
DEBUG_MODE=on
```

→ サイドバーでリアルタイムに情報確認

### テスト時

```bash
DEBUG_MODE=off
DEBUG_LOG_ALWAYS=True
```

→ ログファイルで詳細を記録

### 本番環境

```bash
DEBUG_MODE=off
DEBUG_LOG_ALWAYS=True
```

→ ユーザー体験を損なわず、問題追跡が可能

## 🎯 重要なポイント

1. **処理時間**: API 呼び出しごとに計測
2. **リファレンスデータ**: 使用したイベント・シナリオを記録
3. **評価スコア**: AI 回答の質を数値で確認可能
4. **推定コスト**: トークン使用量から自動計算
5. **ログ永続化**: デバッグ情報は自動的にファイル保存

## ✨ 新機能

- ハイブリッド方式: UI 表示とログ記録を独立して制御
- 評価スコアの可視化: 5 段階評価を自動記録
- パフォーマンス計測: API 応答時間の詳細追跡
- JSON 形式ログ: 機械可読な形式で分析が容易
